<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Wordrops game â€“ La piattaforma per scrivere e collaborare in tempo
            reale
        </title>
        <!-- Google Tag Manager -->
        <script>
            (function (w, d, s, l, i) {
                w[l] = w[l] || [];
                w[l].push({
                    "gtm.start": new Date().getTime(),
                    event: "gtm.js",
                });
                var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != "dataLayer" ? "&l=" + l : "";
                j.async = true;
                j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
                f.parentNode.insertBefore(j, f);
            })(window, document, "script", "dataLayer", "GTM-N6J3B7DJ");
        </script>
        <!-- End Google Tag Manager -->

        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/favicon/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/favicon/favicon-16x16.png"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap"
            rel="stylesheet"
        />
        <link href="/style/style.css" rel="stylesheet" />
        <link href="/style/output.css" rel="stylesheet" />
        <link
            href="https://cdn.quilljs.com/1.3.7/quill.snow.css"
            rel="stylesheet"
        />
    </head>
    <body class="bbg-gradient-to-r from-white to-gray-200 overflow-x-hidden">
        <!-- Google Tag Manager (noscript) -->
        <noscript
            ><iframe
                src="https://www.googletagmanager.com/ns.html?id=GTM-N6J3B7DJ"
                height="0"
                width="0"
                style="display: none; visibility: hidden"
            ></iframe
        ></noscript>
        <div
            id="scoreModal"
            class="fixed inset-0 items-center justify-center bg-black bg-opacity-80 hidden z-50"
        >
            <div class="bg-white p-6 rounded-lg shadow-lg w-96">
                <h2 class="text-2xl font-semibold">Assegna i punteggi</h2>
                <p class="mb-4">Ora puoi votare i capitoli.</p>

                <!-- Contenitore per i capitoli -->
                <div id="chaptersContainer" class="space-y-2">
                    <!-- Qui verranno inseriti i capitoli dinamicamente -->
                </div>

                <button
                    onclick="closeModal()"
                    class="mt-4 px-4 py-2 bg-blue-600 text-white rounded"
                >
                    Chiudi
                </button>
            </div>
        </div>
        <button
            id="toggleChatButton"
            class="fixed bottom-6 right-4 p-2 bg-blue-500 z-50 text-white rounded-full shadow-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
            ðŸ’¬
            <div
                id="notificationSymbol"
                class="absolute top-0 left-0 w-3 h-3 bg-red-500 rounded-full hidden"
            ></div>
        </button>
        <div id="chatContainer" class="fixed bottom-2 z-50 chatNotVisible">
            <div class="w-full max-w-md bg-white p-4 rounded-lg shadow-lg">
                <!-- Area messaggi -->
                <div
                    id="chatBox"
                    class="h-80 overflow-y-auto mb-4 p-2 bg-gray-50 border rounded-lg"
                >
                    <!-- I messaggi verranno visualizzati qui -->
                </div>

                <!-- Campo di input per il messaggio -->
                <div class="flex">
                    <input
                        id="messageInput"
                        type="text"
                        class="w-full p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Scrivi un messaggio..."
                    />
                    <button
                        id="sendButton"
                        class="bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                        Invia
                    </button>
                </div>
            </div>
        </div>

        <div class="page-wrap p-6 relative">
            <div
                id="new-popup-message"
                class="hidden z-50 fixed inset-0 bg-gray-800 bg-opacity-50 items-center justify-center"
            >
                <div class="bg-white p-6 rounded-lg shadow-lg w-96">
                    <p
                        id="new-popup-text"
                        class="text-center text-xl font-semibold text-gray-800"
                    ></p>
                    <button
                        id="new-popup-close"
                        class="mt-4 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full w-full"
                    >
                        Chiudi
                    </button>
                </div>
            </div>

            <div
                id="popup-message"
                class="fixed inset-0 bg-black bg-opacity-60 items-center justify-center hidden z-40"
            >
                <div
                    class="bg-white rounded-lg shadow-lg p-6 text-center max-w-sm w-full"
                >
                    <p
                        id="popup-text"
                        class="text-lg font-semibold text-gray-800 mb-4"
                    ></p>
                    <button
                        id="popup-close"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded"
                    >
                        Ok
                    </button>
                </div>
            </div>

            <!-- menu container -->
            <div
                id="menu-container"
                class="menu-wrapper w-full flex justify-center fixed left-0 right-0 z-10"
            >
                <div
                    class="inline-flex justify-center relative items-center gap-6"
                >
                    <div
                        id="dashboard-icon"
                        class="icon-container border-2 border-blue-400"
                        onclick="dashboardButton()"
                    >
                        <img
                            src="/images/icons/icons8-casa-100.png"
                            alt="Search Icon"
                            class="w-6 h-6"
                        />
                    </div>
                </div>
                <div
                    id="user-search-wrapper"
                    class="user-search-wrapper absolute top-0 right-6 opacity-0"
                >
                    <div class="relative">
                        <div
                            id="close-button"
                            onclick="closeSearch()"
                            class="absolute bg-white p-2 rounded-full w-6 h-6 top-0 right-0 cursor-pointer transform translate-x-1/2 -translate-y-1/2"
                            onclick="document.getElementById('friend-search-wrapper').classList.add('hidden')"
                        >
                            <img
                                src="/images/icons/x-icon.png"
                                alt="close-search-user"
                            />
                        </div>
                        <div
                            class="text-xs px-3 py-2 rounded bg-green-400 flex flex-col font-medium shadow-sm"
                        >
                            <form
                                id="search-form"
                                class="flex flex-col space-y-1"
                            >
                                <input
                                    type="text"
                                    id="search-input"
                                    placeholder="Cerca un utente..."
                                    class="px-2 py-1 rounded border border-gray-300 focus:outline-none focus:border-blue-500 transition duration-200"
                                />
                            </form>
                        </div>
                        <div class="results my-2" id="results"></div>
                    </div>
                </div>
            </div>

            <div
                id="popup-start-countdown"
                class="hidden fixed inset-0 bg-gray-800 bg-opacity-80 items-center justify-center z-40"
            >
                <div
                    class="bg-white rounded-lg shadow-lg p-6 max-w-lg text-center"
                >
                    <h2 class="text-2xl font-bold mb-4 text-gray-800">
                        Partita a Tempo
                    </h2>
                    <p class="text-gray-600 mb-6">
                        La partita Ã¨ a tempo! Quando tutti saranno pronti, il
                        countdown non potrÃ  piÃº essere fermato.
                    </p>
                    <button
                        onClick="buttonStartGame()"
                        class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-300"
                    >
                        Sono pronto!
                    </button>
                </div>
            </div>
            <div id="ui-container" class="mt-20">
                <!-- game UI container -->
                <div
                    id="game-ui-container"
                    class="game-ui-container flex-row items-start justify-center max-w-4xl min-h-screen px-8 sm:px-8 mx-auto"
                >
                    <div
                        id="gameUI-update"
                        class="flex flex-col items-center justify-center p-4 bg-gray-50 mt-24"
                    >
                        <div
                            class="flex items-center justify-center gap-16 rounded"
                        >
                            <div
                                id="countdown-display"
                                class="text-4xl font-bold text-center"
                            ></div>
                            <div
                                id="current-turn"
                                class="text-lg font-semibold text-right"
                            ></div>
                        </div>
                        <div class="mt-4 flex flex-col items-center">
                            <button
                                id="toggle-participants"
                                class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition"
                            >
                                Partecipanti
                            </button>

                            <div
                                id="turn-order-wrapper"
                                class="hidden mt-2 transition-all duration-300 ease-in-out"
                            >
                                <div
                                    id="turn-order"
                                    class="flex flex-wrap items-center gap-4 p-4 bg-gray-100 rounded"
                                ></div>
                            </div>
                        </div>
                    </div>

                    <div
                        id="chapter-editor-container"
                        class="flex-row justify-start mt-20"
                    >
                        <div
                            id="fox-animations"
                            class="hidden flex items-center justify-center"
                        >
                            <!-- Scrivendo -->
                            <div
                                id="writing-fox"
                                class="flex flex-col items-center justify-center text-center"
                            >
                                <video
                                    autoplay
                                    muted
                                    loop
                                    playsinline
                                    class="writing-fox w-16 h-auto"
                                >
                                    <source
                                        src="/animations/writing-fox-animation.webm"
                                        type="video/webm"
                                    />
                                </video>
                                <div
                                    id="writing-text"
                                    class="text-sm text-gray-400 mt-2"
                                ></div>
                            </div>

                            <!-- Pensando -->
                            <div
                                id="thinking-fox"
                                class="hidden flex flex-col items-center justify-center text-center"
                            >
                                <video
                                    autoplay
                                    muted
                                    loop
                                    playsinline
                                    class="thinking-fox w-16 h-auto"
                                >
                                    <source
                                        src="/animations/thinking-fox-animation.webm"
                                        type="video/webm"
                                    />
                                </video>
                                <div
                                    id="thinking-text"
                                    class="text-sm text-gray-400 mt-2"
                                >
                                    In attesa..
                                </div>
                            </div>
                        </div>
                        <div>
                            <div id="toolbar-container" class="rounded"></div>
                            <div class="flex flex-col my-6">
                                <input
                                    type="text"
                                    id="chapter-title"
                                    placeholder="Titolo.."
                                    class="p-2 border text-xl rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-blue-200"
                                />
                            </div>
                            <div
                                id="editor-container"
                                class="bg-white mt-10 p-4 border rounded shadow min-height-custom"
                            ></div>
                            <button
                                id="send-chapter-button"
                                onclick="getChapter()"
                                class="mt-4 px-4 py-2 bg-blue-500 text-white rounded shadow hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300"
                            >
                                Invia Capitolo
                            </button>
                        </div>
                    </div>
                    <div id="updates-list" class="mt-20"></div>
                </div>
            </div>
        </div>

        <script src="/js/menu.js" defer></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
        <script src="/js/checkGame.js" defer></script>
    </body>
</html>
