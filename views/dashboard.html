<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Wordrops Dashboard – La piattaforma per scrivere e collaborare in
            tempo reale
        </title>
        <!-- Google Tag Manager -->
        <script>
            (function (w, d, s, l, i) {
                w[l] = w[l] || [];
                w[l].push({
                    "gtm.start": new Date().getTime(),
                    event: "gtm.js",
                });
                var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != "dataLayer" ? "&l=" + l : "";
                j.async = true;
                j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
                f.parentNode.insertBefore(j, f);
            })(window, document, "script", "dataLayer", "GTM-N6J3B7DJ");
        </script>
        <!-- End Google Tag Manager -->

        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/favicon/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/favicon/favicon-16x16.png"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap"
            rel="stylesheet"
        />
        <link href="/style/style.css" rel="stylesheet" />
        <link rel="stylesheet" href="/swiper/swiper-bundle.min.css" />
        <link href="/style/output.css" rel="stylesheet" />
        <link
            href="https://fonts.googleapis.com/css2?family=Yellowtail&display=swap"
            rel="stylesheet"
        />
        <script src="/js/checkAuth.js"></script>
    </head>

    <body class="h-screen">
        <!-- Google Tag Manager (noscript) -->
        <noscript
            ><iframe
                src="https://www.googletagmanager.com/ns.html?id=GTM-N6J3B7DJ"
                height="0"
                width="0"
                style="display: none; visibility: hidden"
            ></iframe
        ></noscript>
        <div
            id="notification-container"
            class="fixed top-8 right-8 flex justify-center items-center z-50"
        ></div>

        <div
            id="overlay-books"
            class="fixed hidden pb-2 md:pb-8 inset-0 w-full h-full z-50 flex flex-col items-center justify-start gap-2 transition-all duration-500"
        >
            <div
                id="overlay-backdrop"
                class="absolute inset-0 bg-black/80 z-50 transition-opacity duration-500"
            ></div>
            <button
                onclick="closeBookOverlay()"
                class="cursor-pointer text-white z-50 font-bold mt-2 px-4 py-2 rounded flex items-center justify-center shadow-lg transition duration-300"
            >
                <img
                    class="size-6 md:size-8"
                    src="/images/icons/back_arrow.png"
                    alt=""
                />
            </button>
            <div
                class="bg-white p-4 md:p-8 h-full rounded-lg shadow-lg max-w-6xl w-full flex flex-col overflow-y-auto z-50"
            >
                <!-- Prima parte: Immagine e informazioni libro -->
                <div
                    class="flex flex-col gap-4 md:flex-row md:gap-12 p-4 border-2 border-gray-200 rounded-lg"
                >
                    <!-- Immagine del libro -->
                    <div class="w-auto flex justify-left items-start">
                        <img
                            src="/images/book-icon.png"
                            alt="Icona Libro"
                            class="size-14 md:size-26 lg:size-36 rounded shadow-md"
                        />
                    </div>

                    <!-- Dettagli libro -->
                    <div class="w-2/3 flex flex-col">
                        <!-- Titolo -->
                        <h2
                            class="text-2xl lg:text-6xl font-bold"
                            id="book-title"
                        >
                            Titolo del Libro
                        </h2>

                        <!-- Rating -->
                        <div class="flex items-center gap-2 mt-2">
                            <span class="text-lg font-semibold">Rating:</span>
                            <div id="book-rating" class="flex gap-1">
                                ⭐⭐⭐⭐⭐
                            </div>
                        </div>

                        <!-- Autori -->
                        <div class="mt-4">
                            <h3 class="text-lg font-semibold">Autori:</h3>
                            <div class="flex gap-4 mt-2">
                                <div class="flex flex-col items-center">
                                    <div
                                        class="w-12 h-12 bg-gray-300 rounded-full"
                                    ></div>
                                    <span class="text-sm mt-1">Utente1</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div
                                        class="w-12 h-12 bg-gray-300 rounded-full"
                                    ></div>
                                    <span class="text-sm mt-1">Utente2</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div
                                        class="w-12 h-12 bg-gray-300 rounded-full"
                                    ></div>
                                    <span class="text-sm mt-1">Utente3</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div
                                        class="w-12 h-12 bg-gray-300 rounded-full"
                                    ></div>
                                    <span class="text-sm mt-1">Utente4</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div
                                        class="w-12 h-12 bg-gray-300 rounded-full"
                                    ></div>
                                    <span class="text-sm mt-1">Utente5</span>
                                </div>
                            </div>
                        </div>

                        <!-- Genere -->
                        <div class="mt-4">
                            <h3 class="text-lg font-semibold">Genere:</h3>
                            <p id="book-genre" class="text-gray-700">
                                Fantasy, Avventura
                            </p>
                        </div>

                        <!-- Descrizione -->
                        <div class="mt-4">
                            <h3 class="text-lg font-semibold">Descrizione:</h3>
                            <p id="book-summary" class="text-gray-700">
                                Lorem ipsum dolor sit amet, consectetur
                                adipiscing elit.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Seconda parte: Capitoli -->
                <div
                    class="mt-12 md:mt:24 max-h-80 book-chapters-container flex flex-col gap-20"
                >
                    <!-- dynamic chapters -->
                </div>
            </div>
        </div>

        <div
            id="delete-modal"
            class="fixed inset-0 z-50 hidden items-center justify-center bg-black/30"
        >
            <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md">
                <h2 class="text-xl font-bold mb-4 text-red-600">
                    Conferma Cancellazione
                </h2>
                <p class="mb-4 text-sm text-gray-600">
                    Inserisci la tua password per confermare la cancellazione
                    del tuo account. Questa azione è irreversibile.
                </p>

                <input
                    type="password"
                    id="confirm-password"
                    class="w-full px-4 py-2 border rounded-lg mb-4 focus:outline-none focus:ring focus:border-blue-300"
                    placeholder="Password"
                />

                <div class="flex justify-end gap-4">
                    <button
                        onclick="closeDeleteModal()"
                        class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 cursor-pointer"
                    >
                        Annulla
                    </button>
                    <button
                        onclick="confirmDeleteAccount()"
                        class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 cursor-pointer"
                    >
                        Conferma
                    </button>
                </div>
            </div>
        </div>

        <div
            id="overlay-new-game"
            class="fixed inset-0 z-50 flex bg-black opacity-0 bg-opacity-100 transform translate-y-10 transition-all duration-500"
            style="display: none"
        >
            <button
                onclick="closeOverlay()"
                class="absolute cursor-pointer top-1/2 left-1/2 transform -translate-x-1/2 z-50 -translate-y-1/2 bg-red-600 text-white font-bold w-16 h-16 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition duration-300"
            >
                ESCI
            </button>

            <div
                class="w-1/2 h-full flex items-center justify-center ml-auto relative group"
            >
                <img
                    id="img1"
                    class="absolute w-full h-full object-cover opacity-70 custom-filter"
                    src="/images/homepage-main-img.jpg"
                    alt="Normal Mode Background"
                />

                <!-- Contenitore dei pulsanti -->
                <div class="flex flex-col gap-10 items-center">
                    <button
                        id="new-game-button-normal-fast"
                        onclick="joinQueue({ type: 'normal', gamespeed: 'fast' })"
                        class="w-40 cursor-pointer group-hover:opacity-100 transition opacity-0 duration-700 hover-sound text-sm bg-blue-600 border border-white text-white font-semibold px-10 py-6 rounded-xl shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        QUICK
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition duration-300 rotate-12 transform"
                        >
                            30 MIN
                        </div>
                    </button>

                    <div
                        class="w-full text-center text-white text-6xl font-extrabold z-10"
                    >
                        NORMALE
                    </div>

                    <button
                        id="new-game-button-normal-slow"
                        onclick="joinQueue({ type: 'normal', gamespeed: 'slow' })"
                        class="w-40 cursor-pointer group-hover:opacity-100 transition opacity-0 duration-700 hover-sound text-sm bg-blue-600 border border-white text-white font-semibold px-10 py-6 rounded-xl flex items-center justify-center shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        ENDURANCE
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition duration-300 rotate-12 transform"
                        >
                            12 ORE
                        </div>
                    </button>
                </div>

                <!-- Testo NORMAL -->
            </div>

            <!-- Sezione destra -->

            <div
                class="w-1/2 h-full flex items-center justify-center ml-auto relative group"
            >
                <img
                    id="img2"
                    class="absolute w-full h-full object-cover custom-filter"
                    src="/images/write-web-app_register-image-version2.png"
                    alt="Normal Mode Background"
                />

                <!-- Contenitore dei pulsanti -->
                <div class="flex flex-col gap-10 items-center">
                    <button
                        id="new-game-button-ranked-fast"
                        onclick="joinQueue({ type: 'ranked', gamespeed: 'fast' })"
                        class="w-40 cursor-pointer group-hover:opacity-100 transition opacity-0 duration-700 hover-sound text-sm bg-gradient-to-r from-purple-800 to-red-400 border border-white text-white font-semibold px-10 py-6 rounded-xl flex items-center justify-center shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        QUICK
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition duration-300 rotate-12 transform"
                        >
                            30 MIN
                        </div>
                    </button>

                    <div
                        class="w-full text-center text-white text-6xl font-extrabold z-10"
                    >
                        CLASSIFICATA
                    </div>

                    <button
                        id="new-game-button-ranked-slow"
                        onclick="joinQueue({ type: 'ranked', gamespeed: 'slow' })"
                        class="w-40 cursor-pointer group-hover:opacity-100 transition opacity-0 duration-700 hover-sound text-sm bg-gradient-to-r from-purple-800 to-red-400 border border-white text-white font-semibold px-10 py-6 rounded-xl flex items-center justify-center shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        ENDURANCE
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition duration-300 rotate-12 transform"
                        >
                            12 ORE
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <div class="h-[35%] flex flex-col w-full">
            <!-- BOX_MENU (top center on mobile, right on desktop) -->
            <div
                class="w-full md:h-full md:hidden px-6"
                style="
                    background-color: #faf4f4;
                    border-bottom-left-radius: 2rem;
                    border-bottom-right-radius: 2rem;
                "
            >
                <div
                    class="md:rounded-full p-2 flex flex-row justify-center items-center gap-6 px-8 relative"
                >
                    <a
                        href="/classifiche"
                        class="button-container flex flex-col justify-center items-center"
                    >
                        <img
                            src="/images/icons/icons8-trofeo-48.png"
                            alt="leaderboard Icon"
                            class="icon-image size-10"
                        />
                    </a>

                    <a
                        href="/storie-community"
                        class="button-container flex flex-col justify-center items-center"
                    >
                        <img
                            src="/images/icons/library-icon.png"
                            alt="library Icon"
                            class="icon-image size-10"
                        />
                    </a>
                    <button
                        onclick="toggleDropdownMobile()"
                        class="p-2 absolute right-0 rounded-md border-2 border-white focus:outline-none"
                    >
                        <!-- Hamburger Icon with SVG image -->
                        <img
                            src="/images/icons/hamburger-menu-50.png"
                            alt="Hamburger Menu"
                            class="size-4 md:size-6 cursor-pointer"
                        />
                    </button>
                    <div
                        class="hidden dropdown-menu-mobile absolute top-16 right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-50"
                    >
                        <div
                            class="flex justify-between items-center px-4 py-2 text-red-600 hover:bg-red-100 w-full cursor-pointer"
                            onclick="logout()"
                        >
                            <button
                                class="w-full text-sm text-left text-red-600 hover:bg-red-100"
                            >
                                logout
                            </button>
                            <div class="w-6 h-6">
                                <img
                                    class="cursor-pointer"
                                    src="/images/icons/logout-icon.png"
                                    alt="logout Icon"
                                />
                            </div>
                        </div>
                        <div
                            class="flex justify-between items-center px-4 py-2 text-red-600 hover:bg-red-100 w-full cursor-pointer"
                            onclick="modalDeleteAccount()"
                        >
                            <button
                                id="delete-account-btn"
                                class="w-full pointer-events-none text-sm text-left text-red-600 hover:bg-red-100"
                            >
                                Cancella Account
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Middle row -->
            <div
                class="flex flex-row w-full h-full md:flex-1 md:justify-between"
            >
                <!-- BOX_USER (left on mobile and desktop) -->
                <div
                    class="w-1/2 md:flex-1 h-full relative flex flex-col justify-center items-center"
                >
                    <!-- Avatar e nome utente -->
                    <div
                        class="flex flex-col items-center justify-center relative"
                    >
                        <!-- Avatar container -->
                        <div class="relative size-20 md:size-32">
                            <div
                                class="w-full h-full p-2 rounded-full border-4 border-white bg-white shadow-md overflow-hidden flex justify-center items-center"
                            >
                                <img id="main-avatar" class="w-auto h-full" />
                            </div>

                            <!-- Icona cambio avatar -->
                            <div
                                class="absolute bottom-0 right-0 h-8 w-8 bg-white rounded-full flex items-center justify-center shadow-md cursor-pointer"
                            >
                                <img
                                    src="/images/icons/change-avatar-icon.png"
                                    alt="Change Avatar"
                                    class="size-5"
                                    onclick="openAvatarMenu()"
                                />
                            </div>
                        </div>

                        <!-- Username -->
                        <div class="text-center">
                            <h2
                                id="username"
                                class="text-gray-800 text-xl font-bold"
                            ></h2>
                        </div>

                        <!-- Status -->
                        <div
                            id="status-div"
                            class="flex items-center hidden justify-center space-x-2 mt-2"
                        >
                            <span class="text-sm font-semibold"
                                >Sei in game</span
                            >
                            <span
                                id="game-status-indicator"
                                class="w-2 h-2 rounded-full bg-green-500"
                            ></span>
                        </div>
                    </div>
                </div>

                <!-- BOX_LIBRO (right on mobile, center on desktop) -->
                <div
                    class="w-1/2 md:flex-1 h-full flex flex-col justify-center items-center"
                >
                    <div
                        onclick="openOverlay()"
                        class="relative size-16 md:size-42 mb-2"
                        id="lottie-button"
                    >
                        <div id="lottie-book"></div>
                        <img
                            src="/images/pen.png"
                            alt=""
                            class="absolute w-6 md:w-8 lg:w-12 right-0 top-0"
                        />
                    </div>
                    <h2
                        class="my-title text-lg md:text-xl lg:text-2xl text-gray-800"
                    >
                        Nuova Storia
                    </h2>
                </div>

                <!-- BOX_MENU (hidden on mobile, shown right on desktop) -->
                <div
                    class="box-menu-hidden md:flex-1 h-full justify-center items-center"
                >
                    <div
                        class="border-2 border-purple-200 rounded-full p-2 flex flex-row gap-8 px-8 relative"
                    >
                        <div class="relative">
                            <div
                                class="text-xs px-3 py-2 rounded flex flex-col font-medium shadow-sm"
                            >
                                <form
                                    id="search-form"
                                    class="flex flex-col space-y-1"
                                >
                                    <input
                                        type="text"
                                        id="search-input"
                                        placeholder="Cerca un utente..."
                                        class="px-2 py-1 rounded border border-gray-300 focus:outline-none focus:border-blue-500 transition duration-200"
                                    />
                                </form>
                            </div>
                            <div
                                class="absolute left-0 right-0 mt-2 text-sm rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto"
                                id="results"
                            ></div>
                        </div>
                        <a
                            href="/classifiche"
                            class="button-container flex flex-col justify-center items-center"
                        >
                            <img
                                src="/images/icons/icons8-trofeo-48.png"
                                alt="leaderboard Icon"
                                class="icon-image size-6"
                            />
                            <div class="text-sm font-semibold text-gray-800">
                                classifiche
                            </div>
                        </a>

                        <a
                            href="/storie-community"
                            class="button-container flex flex-col justify-center items-center"
                        >
                            <img
                                src="/images/icons/library-icon.png"
                                alt="library Icon"
                                class="icon-image size-6"
                            />
                            <div class="text-sm font-semibold text-gray-800">
                                libreria
                            </div>
                        </a>
                        <button
                            onclick="toggleDropdown()"
                            class="p-2 rounded-md focus:outline-none"
                        >
                            <!-- Hamburger Icon with SVG image -->
                            <img
                                src="/images/icons/hamburger-menu-50.png"
                                alt="Hamburger Menu"
                                class="w-6 h-6 cursor-pointer"
                            />
                        </button>
                        <div
                            class="dropdown-menu hidden absolute top-16 right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-50"
                        >
                            <div
                                class="flex justify-between items-center px-4 py-2 text-red-600 hover:bg-red-100 w-full cursor-pointer"
                                onclick="logout()"
                            >
                                <button
                                    class="w-full text-sm text-left text-red-600 hover:bg-red-100"
                                >
                                    logout
                                </button>
                                <div class="w-6 h-6">
                                    <img
                                        class="cursor-pointer"
                                        src="/images/icons/logout-icon.png"
                                        alt="logout Icon"
                                    />
                                </div>
                            </div>
                            <div
                                class="flex justify-between items-center px-4 py-2 text-red-600 hover:bg-red-100 w-full cursor-pointer"
                                onclick="modalDeleteAccount()"
                            >
                                <button
                                    id="delete-account-btn"
                                    class="w-full pointer-events-none text-sm text-left text-red-600 hover:bg-red-100"
                                >
                                    Cancella Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BOX_PAGINATION (bottom center always) -->
            <div
                class="w-full md:w-1/2 mx-auto flex justify-center h-12 relative"
            >
                <div class="swiper-pagination"></div>
            </div>
        </div>

        <div
            class="h-[65%] w-full shadow-4xl relative"
            style="
                border-top-left-radius: 4rem;
                border-top-right-radius: 4rem;
                background-color: #faf4f4;
            "
        >
            <div
                class="swiper-container overflow-hidden"
                style="height: 100%; width: 100%"
            >
                <div class="swiper-wrapper" style="display: flex; height: 100%">
                    <div
                        class="swiper-slide flex relative items-start justify-center w-full flex-shrink-0 h-full"
                    >
                        <img
                            class="absolute bottom-0 right-0 w-1/4 opacity-10"
                            src="/images/platy-read.png"
                            alt="Platy Read"
                        />
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Partite in Corso
                            </h2>
                            <div
                                id="buttons-container"
                                class="flex flex-wrap py-24 md:py-36 px-6 max-w-6xl h-auto gap-6 md:gap-10 justify-center items-center"
                            >
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-1"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-2"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-3"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-4"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-5"
                                ></div>
                            </div>
                        </div>
                    </div>
                    <div
                        class="swiper-slide flex flex-col items-center justify-center h-full"
                    >
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Storie Completate
                            </h2>
                            <div
                                class="w-full h-full max-w-6xl scrollbar-hidden mt-12 flex flex-col justify-start items-center overflow-y-auto px-4"
                            >
                                <div
                                    id="stories-container"
                                    class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-8 w-full"
                                >
                                    <!-- Qui vengono inserite le storie -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="swiper-slide flex items-start justify-center px-10 w-full flex-shrink-0 h-full"
                    >
                        <img
                            class="absolute bottom-0 right-0 w-1/4 opacity-10"
                            src="/images/platy-library.png"
                            alt="Platy Read"
                        />
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Preferiti
                            </h2>

                            <div
                                id="stories-container-wrapper"
                                class="hidden relative w-full max-w-6xl mx-auto flex justify-center mt-20 px-4"
                            ></div>
                        </div>
                    </div>
                    <div
                        class="swiper-slide flex relative items-start justify-center w-full flex-shrink-0 h-full"
                    >
                        <img
                            class="slide-imag absolute bottom-0 left-0 w-1/4 opacity-10"
                            src="/images/platy-win.png"
                            alt="Platy Read"
                        />
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Statistiche
                            </h2>
                            <div
                                class="flex md:py-36 md:px-6 max-w-6xl h-full gap-6 justify-center items-center"
                            >
                                <div
                                    class="statistics-container mx-auto p-6 md:bg-white rounded-lg shadow-lg h-full md:h-auto overflow-y-auto md:overflow-y-hidden"
                                >
                                    <div
                                        class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6 md:min-h-[350px]"
                                    >
                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-blue-500 text-lg md:text-2xl mb-2"
                                            >
                                                <i class="fas fa-book-open"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Storie Completate
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-yellow-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-star"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Media Voti Storie
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-red-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-trophy"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Ranking Attuale
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    #0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-green-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-medal"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Punteggio Medio Ranked
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-purple-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-gamepad"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Normal Games Giocati
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-orange-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-trophy"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Normal Games Vinti
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-teal-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-gamepad"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Ranked Games Giocati
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-red-400 text-2xl mb-2"
                                            >
                                                <i class="fas fa-trophy"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Ranked Games Vinti
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-yellow-600 text-2xl mb-2"
                                            >
                                                <i class="fas fa-star"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Storie Votate
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-pink-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-comment"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <p
                                                    class="text-sm font-semibold text-gray-600"
                                                >
                                                    Storie Commentate
                                                </p>
                                                <p
                                                    class="text-lg font-bold text-gray-800"
                                                >
                                                    0
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div
            id="new-popup-message"
            class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50"
        >
            <div class="bg-white p-6 rounded-lg shadow-lg w-96">
                <p
                    id="new-popup-text"
                    class="text-center text-xl font-semibold text-gray-800"
                ></p>
                <button
                    id="new-popup-close"
                    class="mt-4 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full w-full"
                >
                    Chiudi
                </button>
            </div>
        </div>

        <div
            id="popup-message"
            class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden z-50"
        >
            <div
                class="bg-white rounded-lg shadow-lg p-6 text-center max-w-sm w-full"
            >
                <p
                    id="popup-text"
                    class="text-lg font-semibold text-gray-800 mb-4"
                ></p>
                <button
                    id="popup-close"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded"
                >
                    Ok
                </button>
            </div>
        </div>

        <div
            id="loading-overlay"
            class="fixed inset-0 flex items-center justify-center z-50 opacity-100 hidden transition-opacity duration-1000"
        >
            <img
                class="w-full h-full object-cover"
                src="/images/gifs/book-loader-dashboard.gif"
                alt="Loading Animation"
            />
        </div>

        <div
            id="avatarContainer"
            class="hidden flex justify-center items-center p-50 fixed inset-0 bg-black/80 z-50"
        >
            <div class="flex flex-col justify-center items-center h-screen">
                <div
                    class="grid grid-cols-4 relative grid-rows-3 gap-4 p-6 rounded shadow-lg"
                >
                    <button
                        id="close-avatar-menu"
                        class="absolute cursor-pointer -top-2 -right-2 w-6 h-6 rounded-full bg-white text-black text-lg flex items-center justify-center"
                    >
                        X
                    </button>
                    <div
                        data-avatar="boa-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/boa-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="nami-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/nami-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="luffy-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/luffy-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="zoro-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/zoro-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="sanji-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/sanji-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="panda-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/panda-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="shanks-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/shanks-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="robin-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/robin-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="chopper-icon-chibi"
                        class="avatar w-20 h-20 bg-blue-200 flex items-center justify-center rounded bg-opacity-50 p-2 border-2 border-transparent hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-4/5 h-4/5 object-contain"
                            src="/images/avatars/chopper-icon-chibi.png"
                            alt="Avatar"
                        />
                    </div>
                </div>
                <button
                    id="select-avatar-button"
                    class="bg-blue-500 cursor-pointer text-white py-2 px-4 rounded"
                    disabled
                >
                    Seleziona
                </button>
            </div>
        </div>

        <div class="page-wrap p-6 fixed min-h-screen z-50">
            <!-- queue overlay -->
            <div
                id="waiting-overlay"
                class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center hidden"
            >
                <div class="flex flex-col items-center">
                    <div id="waiting-text" class="text-white text-2xl mb-4">
                        In attesa di altri giocatori...
                    </div>
                    <div id="waiting-gif" class="mb-4">
                        <img
                            src="/images/gifs/queue-spinner.gif"
                            alt="Waiting Gif"
                            class="w-32 h-32"
                        />
                    </div>
                    <button
                        id="abandon-queue-button"
                        onclick="abandonQueue()"
                        class="px-6 py-3 bg-red-500 text-white font-semibold text-lg rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300 cursor-pointer"
                    >
                        Abbandona
                    </button>
                </div>
            </div>

            <!-- preQueue overlay -->
            <div
                id="countdown-overlay"
                class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-10 hidden"
            >
                <div
                    id="game-ready-container"
                    class="flex flex-col items-center hidden"
                >
                    <h2 class="text-red-600 text-2xl font-bold">
                        TUTTI PRONTI
                    </h2>
                </div>
                <div
                    id="countdown-seconds-container"
                    class="flex flex-col items-center"
                >
                    <div id="countdown" class="text-white text-2xl mb-2">
                        Partita trovata, Inizio in:
                    </div>
                    <h2
                        id="countdown-seconds"
                        class="text-red-600 text-9xl font-bold"
                    >
                        10
                    </h2>
                    <button
                        id="ready-btn"
                        onclick="readyToPlay()"
                        class="mt-20 px-6 py-3 bg-blue-500 text-white font-semibold text-lg rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300"
                    >
                        SEI PRONTO?
                    </button>
                    <h2
                        id="pronto-text"
                        class="hidden text-red-400 mt-20 text-2xl font-bold"
                    >
                        PRONTO
                    </h2>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.0/lottie.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/swiper/swiper-bundle.min.js"></script>
        <script src="/js/main.js" defer></script>
        <script src="/js/menu.js" defer></script>
        <script src="/js/personalLibrary.js"></script>

        <audio
            id="click-sound"
            src="/images/button-hover-sound.mp3"
            preload="auto"
        ></audio>
        <audio
            id="select-sound"
            src="/images/avatar-select-1.mp3"
            preload="auto"
        ></audio>
        <audio
            id="select-sound-new-game"
            src="/images/new-game-sound.mp3"
            preload="auto"
        ></audio>
    </body>
</html>
