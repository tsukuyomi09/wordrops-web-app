<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Wordrops Dashboard – La piattaforma per scrivere e collaborare in
            tempo reale
        </title>
        <!-- Google Tag Manager -->
        <script>
            (function (w, d, s, l, i) {
                w[l] = w[l] || [];
                w[l].push({
                    "gtm.start": new Date().getTime(),
                    event: "gtm.js",
                });
                var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != "dataLayer" ? "&l=" + l : "";
                j.async = true;
                j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
                f.parentNode.insertBefore(j, f);
            })(window, document, "script", "dataLayer", "GTM-N6J3B7DJ");
        </script>
        <!-- End Google Tag Manager -->

        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/favicon/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/favicon/favicon-16x16.png"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap"
            rel="stylesheet"
        />
        <link href="/style/style.css" rel="stylesheet" />
        <link rel="stylesheet" href="/swiper/swiper-bundle.min.css" />
        <link href="/style/output.css" rel="stylesheet" />
        <link
            href="https://fonts.googleapis.com/css2?family=Yellowtail&display=swap"
            rel="stylesheet"
        />
        <script src="/js/checkAuth.js"></script>
    </head>

    <body class="h-screen">
        <!-- Google Tag Manager (noscript) -->
        <noscript
            ><iframe
                src="https://www.googletagmanager.com/ns.html?id=GTM-N6J3B7DJ"
                height="0"
                width="0"
                style="display: none; visibility: hidden"
            ></iframe
        ></noscript>
        <div
            id="notification-container"
            class="fixed top-8 right-8 flex justify-center items-center z-50"
        ></div>

        <div
            id="overlay-books"
            class="fixed hidden pb-2 md:pb-8 inset-0 w-full h-full z-50 flex flex-col items-center justify-start gap-2 transition-all duration-500"
        >
            <div
                id="overlay-backdrop"
                class="absolute inset-0 bg-white z-50 transition-opacity duration-500"
            ></div>
            <button
                onclick="closeBookOverlay()"
                class="cursor-pointer text-white z-50 font-bold mt-2 px-4 py-2 flex items-center justify-center transition duration-300"
            >
                <img
                    class="size-6 md:size-8"
                    src="/images/icons/back_arrow.png"
                    alt=""
                />
            </button>
            <div
                class="h-full w-full overflow-hidden flex flew-col items-center justify-center bg-white z-50"
            >
                <div
                    class="bg-white p-4 md:p-8 h-full w-full flex flex-col md:border-1 border-gray-100 shadow-2xl md:gap-24 md:flex-row overflow-y-auto z-50"
                >
                    <!-- Prima parte: Immagine e informazioni libro -->
                    <div
                        class="flex flex-col py-12 flex-1 gap-4 md:sticky h-auto top-0 md:flex-row md:gap-12 px-4 bg-custom-light rounded-lg shadow-lg"
                    >
                        <!-- Dettagli libro -->
                        <div
                            id="book-details"
                            class="relative flex flex-col gap-4"
                        >
                            <div class="w-full">
                                <img
                                    alt="Icona Libro"
                                    class="aspect-[2/3] w-26 book-cover-mob md:hidden shadow-2xl"
                                />
                            </div>
                            <h2
                                class="text-xl lg:text-2xl md:mt-16 italic font-semibold"
                                id="book-title"
                            ></h2>
                            <div
                                id="total-rating"
                                class="absolute top-0 right-0 p-2 md:p-3 ml-2 text-sm md:text-xl font-bold text-custom-blue bg-white rounded-lg"
                            >
                                <img
                                    src="/images/icons/star.png"
                                    alt="star icon"
                                    class="absolute top-0 left-0 transform -translate-y-1/2 -translate-x-1/2 h-3 md:h-4"
                                />
                                <span id="average-rating">4.5</span
                                ><span>/5</span>
                            </div>
                            <div
                                id="book-genre"
                                class="flex flex-row flex-wrap md:flex-nowrap gap-2"
                            ></div>
                            <div class="flex gap-2">
                                <span
                                    id="game-type"
                                    class="px-4 py-1 bg-amber-400 text-gray-800 rounded-md text-sm md:text-md"
                                ></span>
                                <span
                                    id="game-speed"
                                    class="px-4 py-1 bg-green-600 text-gray-800 rounded-lg text-sm md:text-md"
                                ></span>
                            </div>

                            <div class="flex gap-4">
                                <div
                                    id="authors-container"
                                    class="flex items-center flex-wrap md:flex-nowrap gap-4"
                                ></div>
                            </div>

                            <!-- Descrizione -->
                            <div class="">
                                <h3 class="text-lg font-semibold">
                                    Descrizione:
                                </h3>
                                <p id="book-summary" class="text-gray-700"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Seconda parte: Capitoli -->
                    <div
                        class="max-h-full lg:w-[40%] md:w-[50%] mt-20 md:mt-0 book-chapters-container flex flex-col gap-20"
                    >
                        <!-- dynamic chapters -->
                    </div>
                    <div class="flex-1 md:sticky top-1 h-full hidden md:block">
                        <div class="w-full">
                            <img
                                alt="Icona Libro"
                                class="aspect-[2/3] book-cover-desk hidden md:block shadow-2xl"
                            />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div
            id="delete-modal"
            class="fixed inset-0 z-50 hidden items-center justify-center bg-black/30"
        >
            <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md">
                <h2 class="text-xl font-bold mb-4 text-red-600">
                    Conferma Cancellazione
                </h2>
                <p class="mb-4 text-sm text-gray-600">
                    Sei sicuro/a di voler cancellare il tuo account? Questa
                    azione è irreversibile.
                </p>
                <div class="flex justify-end gap-4">
                    <button
                        onclick="closeDeleteModal()"
                        class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 cursor-pointer"
                    >
                        Annulla
                    </button>
                    <button
                        onclick="confirmDeleteAccount()"
                        class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 cursor-pointer"
                    >
                        Conferma
                    </button>
                </div>
            </div>
        </div>

        <div
            id="overlay-new-game"
            class="fixed inset-0 z-50 flex bg-black/75 flex flex-col md:flex-row transform translate-y-10 transition-all duration-500"
            style="display: none"
        >
            <div
                id="game-limit-reached"
                class="absolute hidden z-50 left-1/2 -translate-x-1/2 top-2 text-sm lg:text-xl bg-red-200 text-gray-800 font-semibold md:rounded-2xl py-4 px-6"
            >
                troppe partite
            </div>
            <button
                onclick="closeOverlay()"
                class="absolute cursor-pointer top-1/2 left-1/2 transform -translate-x-1/2 z-50 -translate-y-1/2 bg-red-600 text-white font-bold w-12 h-12 lg:w-16 lg:h-16 text-sm md:text-md rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition duration-300"
            >
                ESCI
            </button>

            <div
                class="w-full md:w-1/2 h-full flex items-center justify-center ml-auto relative group"
            >
                <!-- Contenitore dei pulsanti -->
                <div class="flex flex-col gap-6 lg:gap-10 items-center">
                    <button
                        id="new-game-button-normal-fast"
                        onclick="joinQueue({ gameType: 'normal', gameSpeed: 'fast' })"
                        class="py-4 px-8 lg:py-6 lg:px-14 cursor-pointer transition duration-700 hover-sound text-sm bg-custom-blue border border-white text-white font-semibold rounded-xl shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        CORTA
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-[8px] md:text-xs px-2 py-1 rounded transition duration-300 rotate-12 transform"
                        >
                            TURNO: 1 ORA
                        </div>
                    </button>

                    <div
                        class="w-full text-center text-white text-xl md:text-2xl lg:text-6xl font-extrabold z-10"
                    >
                        CLASSICA
                    </div>

                    <button
                        id="new-game-button-normal-slow"
                        onclick="joinQueue({ gameType: 'normal', gameSpeed: 'slow' })"
                        class="py-4 px-8 lg:py-6 lg:px-14 cursor-pointer transition duration-700 hover-sound text-sm bg-custom-blue border border-white text-white font-semibold rounded-xl flex items-center justify-center shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        LUNGA
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-[8px] md:text-xs px-2 py-1 rounded transition duration-300 rotate-12 transform"
                        >
                            TURNO: 12 ORE
                        </div>
                    </button>
                </div>

                <!-- Testo NORMAL -->
            </div>

            <!-- Sezione destra -->

            <div
                class="w-full md:w-1/2 h-full flex items-center justify-center ml-auto relative group"
            >
                <!-- Contenitore dei pulsanti -->
                <div class="flex flex-col gap-6 lg:gap-10 items-center">
                    <button
                        id="new-game-button-ranked-fast"
                        onclick="joinQueue({ gameType: 'ranked', gameSpeed: 'fast' })"
                        class="py-4 px-8 lg:py-6 lg:px-14 cursor-pointer transition duration-700 hover-sound text-sm bg-gradient-to-r from-purple-800 to-red-400 border border-white text-white font-semibold rounded-xl flex items-center justify-center shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        CORTA
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-[8px] md:text-xs px-2 py-1 rounded transition duration-300 rotate-12 transform"
                        >
                            TURNO: 1 ORA
                        </div>
                    </button>

                    <div
                        class="w-full text-center text-white text-xl md:text-2xl lg:text-6xl font-extrabold z-10"
                    >
                        CLASSIFICATA
                    </div>

                    <button
                        id="new-game-button-ranked-slow"
                        onclick="joinQueue({ gameType: 'ranked', gameSpeed: 'slow' })"
                        class="py-4 px-8 lg:py-6 lg:px-14 cursor-pointer transition duration-700 hover-sound text-sm bg-gradient-to-r from-purple-800 to-red-400 border border-white text-white font-semibold rounded-xl flex items-center justify-center shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transform hover:scale-105 hover:shadow-2xl font-extrabold relative group"
                    >
                        LUNGA
                        <div
                            class="absolute -top-2 -right-1 translate-x-1/2 bg-red-500 px-2 text-white text-[8px] md:text-xs px-2 py-1 rounded transition duration-300 rotate-12 transform"
                        >
                            TURNO: 12 ORE
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <div class="h-[35%] flex flex-col w-full">
            <!-- BOX_MENU (top center on mobile, right on desktop) -->
            <div class="w-full md:px-6 bg-custom-light">
                <div
                    class="p-2 md:p-4 gap-2 flex flex-row justify-between items-center relative"
                >
                    <div class="">
                        <img
                            src="/images/logo_wordrops_classic.svg"
                            alt="Wordrops Logo"
                            class="w-18 lg:w-30 hidden md:block"
                        />
                    </div>
                    <div
                        class="flex justify-center items-center mr-auto gap-2 md:gap-4 md:absolute md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2"
                    >
                        <a
                            href="/classifiche"
                            class="button-container flex flex-col size-10 md:size-12 justify-center items-center rounded-lg border-2 border-gray-200"
                        >
                            <img
                                src="/images/icons/icons8-trofeo-48.png"
                                alt="leaderboard Icon"
                                class="icon-image size-8"
                            />
                        </a>

                        <a
                            href="/storie-community"
                            class="button-container flex flex-col size-10 md:size-12 justify-center items-center rounded-lg border-2 border-gray-200"
                        >
                            <img
                                src="/images/icons/library-icon.png"
                                alt="library Icon"
                                class="icon-image object-fit"
                            />
                        </a>
                    </div>
                    <div
                        class="flex justify-center items-center gap-2 md:gap-4"
                    >
                        <button
                            onclick="toggleDropdownMobile()"
                            class="p-2 rounded-md border-2 size-10 border-gray-200 focus:outline-none"
                        >
                            <!-- Hamburger Icon with SVG image -->
                            <img
                                src="/images/icons/hamburger-menu-50.png"
                                alt="Hamburger Menu"
                                class="size-5 md:size-6 cursor-pointer"
                            />
                        </button>
                        <div
                            class="hidden dropdown-menu-mobile absolute top-16 right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-50"
                        >
                            <div
                                class="flex justify-between items-center px-4 py-2 text-red-600 hover:bg-red-100 w-full cursor-pointer"
                                onclick="logout()"
                            >
                                <button
                                    class="w-full text-sm text-left text-red-600 hover:bg-red-100 cursor-pointer"
                                >
                                    logout
                                </button>
                                <div class="w-6 h-6">
                                    <img
                                        class="cursor-pointer"
                                        src="/images/icons/logout-icon.png"
                                        alt="logout Icon"
                                    />
                                </div>
                            </div>
                            <div
                                class="flex justify-between items-center px-4 py-2 text-red-600 hover:bg-red-100 w-full cursor-pointer"
                                onclick="modalDeleteAccount()"
                            >
                                <button
                                    id="delete-account-btn"
                                    class="w-full pointer-events-none text-sm text-left text-red-600 hover:bg-red-100"
                                >
                                    Cancella Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-2 w-full flex flex-row justify-center items-center">
                <button
                    onclick="openWaitingQueueModal()"
                    id="mini-queue-display"
                    class="cursor-pointer relative hidden flex flex-row justify-center items-center font-semibold text-sm text-gray-800"
                >
                    <div
                        class="cursor-pointer font-semibold text-sm text-green-600"
                    >
                        in coda
                    </div>
                    <div class="absolute -right-6" id="waiting-gif">
                        <img
                            src="/images/gifs/queue-spinner.gif"
                            alt="Waiting Gif"
                            class="size-5"
                        />
                    </div>
                </button>
            </div>

            <!-- Middle row -->
            <div
                class="flex flex-row w-full h-full md:flex-1 md:justify-between"
            >
                <!-- BOX_USER (left on mobile and desktop) -->
                <div
                    class="w-1/2 md:flex-1 h-full relative flex flex-col justify-center items-center"
                >
                    <!-- Avatar e nome utente -->
                    <div
                        class="flex flex-col md:flex-row items-center justify-center relative md:gap-6"
                    >
                        <!-- Avatar container -->
                        <div class="relative size-16 md:size-[6vw]">
                            <div
                                class="rounded-lg bg-white shadow-md overflow-hidden flex justify-center items-center"
                            >
                                <img
                                    id="main-avatar"
                                    class="w-auto h-full object-cover"
                                />
                            </div>

                            <!-- Icona cambio avatar -->
                            <div
                                class="absolute -top-4 -right-4 size-8 bg-white rounded-full flex items-center justify-center shadow-md cursor-pointer"
                            >
                                <img
                                    src="/images/icons/change-avatar-icon.png"
                                    alt="Change Avatar"
                                    class="size-5"
                                    onclick="openAvatarMenu()"
                                />
                            </div>
                        </div>

                        <!-- Username -->
                        <div class="text-center h-full flex items-end">
                            <h2
                                id="username"
                                class="text-gray-800 text-lg md:text-3xl font-bold"
                            ></h2>
                        </div>
                    </div>
                </div>

                <!-- BOX_LIBRO (right on mobile, center on desktop) -->
                <div
                    class="w-1/2 md:flex-1 h-full flex flex-col justify-center items-center"
                >
                    <div
                        onclick="openOverlay()"
                        class="relative cursor-pointer flex flex-col justify-center items-center"
                    >
                        <img
                            src="/images/book_new_game.png"
                            alt=""
                            class="button-container object-cover w-16 lg:w-[6vw]"
                        />
                        <div>
                            <h2
                                class="my-title text-center text-lg md:text-xl lg:text-2xl text-gray-800"
                            >
                                Nuova Storia
                            </h2>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BOX_PAGINATION (bottom center always) -->
            <div
                class="w-full md:w-1/2 mx-auto flex justify-center h-12 relative"
            >
                <div class="swiper-pagination"></div>
            </div>
        </div>

        <div
            class="h-[65%] w-full shadow-4xl relative"
            style="
                border-top-left-radius: 4rem;
                border-top-right-radius: 4rem;
                background-color: #faf4f4;
            "
        >
            <div
                class="swiper-container overflow-hidden"
                style="height: 100%; width: 100%"
            >
                <div class="swiper-wrapper" style="display: flex; height: 100%">
                    <div
                        class="swiper-slide flex relative items-start justify-center w-full flex-shrink-0 h-full"
                    >
                        <img
                            class="absolute bottom-0 right-0 w-[50%] md:w-1/4 opacity-10"
                            src="/images/platy-read.png"
                            alt="Platy Read"
                        />
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Partite in Corso
                            </h2>
                            <div
                                id="buttons-container"
                                class="flex flex-wrap py-24 md:py-36 px-6 max-w-6xl h-auto gap-6 md:gap-10 justify-center items-center"
                            >
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-1"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-2"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-3"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-4"
                                ></div>
                                <div
                                    class="game-container cursor-pointer shadow-lg rounded-xl relative size-20 md:size-42 bg-white transition-all duration-300 hover:shadow-2xl hover:scale-105"
                                    id="game-5"
                                ></div>
                            </div>
                        </div>
                    </div>
                    <div
                        class="swiper-slide flex flex-col items-center justify-center h-full"
                    >
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Storie Completate
                            </h2>
                            <div
                                class="w-full h-full max-w-6xl scrollbar-hidden mt-12 flex flex-col justify-start items-center overflow-y-auto px-4"
                            >
                                <div
                                    id="stories-container"
                                    class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-8 w-full"
                                >
                                    <!-- Qui vengono inserite le storie -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="swiper-slide flex items-start justify-center px-10 w-full flex-shrink-0 h-full"
                    >
                        <img
                            class="absolute bottom-0 right-0 w-[50%] md:w-1/4 opacity-10"
                            src="/images/platy-library.png"
                            alt="Platy Read"
                        />
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Preferiti
                            </h2>

                            <div
                                id="stories-container-wrapper"
                                class="hidden relative w-full max-w-6xl mx-auto flex justify-center mt-20 px-4"
                            ></div>
                            <div
                                class="h-full w-full flex justify-center items-center"
                            >
                                <h3
                                    class="text-lg italic font-semibold text-gray-600"
                                >
                                    presto disponibile
                                </h3>
                            </div>
                        </div>
                    </div>
                    <div
                        class="swiper-slide flex relative items-start justify-center w-full flex-shrink-0 h-full"
                    >
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Amici
                            </h2>
                            <div
                                class="h-full w-full flex justify-center items-center"
                            >
                                <h3
                                    class="text-lg italic font-semibold text-gray-600"
                                >
                                    presto disponibile
                                </h3>
                            </div>
                        </div>
                    </div>
                    <div
                        class="swiper-slide flex relative items-start justify-center w-full flex-shrink-0 h-full"
                    >
                        <img
                            class="slide-imag absolute bottom-0 left-0 w-[50%] md:w-1/4 opacity-10"
                            src="/images/platy-win.png"
                            alt="Platy Read"
                        />
                        <div
                            class="box-slider flex flex-col justify-start py-8 h-full items-center"
                        >
                            <h2
                                class="text-gray-800 text-2xl md:text-4xl font-bold text-center"
                            >
                                Statistiche
                            </h2>
                            <div
                                class="flex md:py-36 md:px-6 max-w-6xl h-full w-full gap-6 justify-center items-center"
                            >
                                <div
                                    class="statistics-container mx-auto p-6 md:bg-white rounded-lg w-full shadow-lg md:min-w-[40vw] h-full md:h-auto overflow-y-auto md:overflow-y-hidden"
                                >
                                    <div
                                        class="grid grid-cols-2 sm:grid-cols-3 gap-6 h-full md:min-h-[350px]"
                                    >
                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-green-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-gamepad"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <div
                                                    class="h-full flex justify-center p-6 items-center"
                                                >
                                                    <p
                                                        id="partite-classiche"
                                                        class="text-xl font-bold text-gray-800"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <div
                                                    class="h-auto p-2 flex justify-center items-center w-full bg-custom-blue"
                                                >
                                                    <p
                                                        class="text-[12px] md:text-lg font-bold text-white"
                                                    >
                                                        Classiche
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-indigo-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-gamepad"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <div
                                                    class="h-full flex justify-center p-6 items-center"
                                                >
                                                    <p
                                                        id="partite-ranked"
                                                        class="text-xl font-bold text-gray-800"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <div
                                                    class="h-auto p-2 flex justify-center items-center w-full bg-custom-blue"
                                                >
                                                    <p
                                                        class="text-[12px] md:text-lg font-bold text-white"
                                                    >
                                                        Classificata
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-purple-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-star"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <div
                                                    class="h-full flex justify-center p-6 items-center"
                                                >
                                                    <p
                                                        id="miglior-performance"
                                                        class="text-xl font-bold text-gray-800"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <div
                                                    class="h-auto p-2 flex justify-center items-center w-full bg-custom-blue"
                                                >
                                                    <p
                                                        class="text-[12px] md:text-lg font-bold text-white"
                                                    >
                                                        Miglior Performance
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-yellow-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-trophy"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <div
                                                    class="h-full flex justify-center p-6 items-center"
                                                >
                                                    <p
                                                        id="punteggio-ranked"
                                                        class="text-xl font-bold text-gray-800"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <div
                                                    class="h-auto p-2 flex justify-center items-center w-full bg-custom-blue"
                                                >
                                                    <p
                                                        class="text-[12px] md:text-lg font-bold text-white"
                                                    >
                                                        Punteggio
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-blue-500 text-lg md:text-2xl mb-2"
                                            >
                                                <i
                                                    class="fas fa-skull-crossbones"
                                                ></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <div
                                                    class="h-full flex justify-center p-6 items-center"
                                                >
                                                    <p
                                                        id="partite-pessime"
                                                        class="text-xl font-bold text-gray-800"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <div
                                                    class="h-auto p-2 flex justify-center items-center w-full bg-custom-blue"
                                                >
                                                    <p
                                                        class="text-[12px] md:text-lg font-bold text-white"
                                                    >
                                                        Partite Pessime
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div
                                            class="relative stat-card bg-white md:bg-gray-100 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105"
                                        >
                                            <div
                                                class="stat-icon absolute -top-2 -left-2 text-red-500 text-2xl mb-2"
                                            >
                                                <i class="fas fa-flag"></i>
                                            </div>
                                            <div
                                                class="stat-info text-center h-full w-full flex flex-col justify-center items-center"
                                            >
                                                <div
                                                    class="h-full flex justify-center p-6 items-center"
                                                >
                                                    <p
                                                        id="abbandoni"
                                                        class="text-xl font-bold text-gray-800"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <div
                                                    class="h-auto p-2 flex justify-center items-center w-full bg-custom-blue"
                                                >
                                                    <p
                                                        class="text-[12px] md:text-lg font-bold text-white"
                                                    >
                                                        Abbandoni
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div
            id="new-popup-message"
            class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50"
        >
            <div class="bg-white p-6 rounded-lg shadow-lg w-96">
                <p
                    id="new-popup-text"
                    class="text-center text-xl font-semibold text-gray-800"
                ></p>
                <button
                    id="new-popup-close"
                    class="mt-4 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full w-full"
                >
                    Chiudi
                </button>
            </div>
        </div>

        <div
            id="popup-message"
            class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden z-50"
        >
            <div
                class="bg-white rounded-lg shadow-lg p-6 text-center max-w-sm w-full"
            >
                <p
                    id="popup-text"
                    class="text-lg font-semibold text-gray-800 mb-4"
                ></p>
                <button
                    id="popup-close"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded"
                >
                    Ok
                </button>
            </div>
        </div>

        <div
            id="loading-overlay"
            class="fixed inset-0 flex items-center justify-center z-50 opacity-100 hidden transition-opacity duration-1000"
        >
            <img
                class="w-full h-full object-cover"
                src="/images/gifs/book-loader-dashboard.gif"
                alt="Loading Animation"
            />
        </div>

        <div
            id="avatars-modal-container"
            class="flex justify-center hidden items-center fixed inset-0 bg-black/40 z-50"
        >
            <div
                class="flex flex-col justify-center items-center h-screen gap-6"
            >
                <div
                    class="relative grid grid-cols-3 md:grid-cols-4 grid-rows-3 gap-2 md:gap-6 p-6 rounded bg-custom-light shadow-lg"
                >
                    <button
                        onclick="closeAvatarMenu()"
                        id="close-avatar-menu"
                        class="absolute cursor-pointer border-1 border-gray-800 -top-2 -right-2 w-6 h-6 rounded-full bg-white text-black text-lg flex items-center justify-center"
                    >
                        X
                    </button>
                    <div
                        data-avatar="scroll_sky_image"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/scroll_sky_image.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="agatha_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/agatha_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="asimov_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/asimov_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="dante_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/dante_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="jane_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/jane_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="king_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/king_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="rowling_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/rowling_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="shakespeare_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/shakespeare_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                    <div
                        data-avatar="tolkien_avatar_square"
                        class="avatar size-[20vw] md:size-26 lg:size-32 rounded-lg overflow-hidden flex items-center justify-center rounded bg-opacity-50 hover:border-2 hover:border-red-500 cursor-pointer"
                    >
                        <img
                            class="w-full h-full object-cover"
                            src="/images/avatars/tolkien_avatar_square.png"
                            alt="Avatar"
                        />
                    </div>
                </div>
                <button
                    onclick="closeAvatarMenu()"
                    class="bg-blue-500 cursor-pointer text-white py-2 px-4 rounded"
                >
                    Seleziona
                </button>
            </div>
        </div>

        <div class="page-wrap p-6 fixed min-h-screen z-50">
            <!-- queue overlay -->
            <div
                id="waiting-overlay"
                class="fixed inset-0 bg-black/80 flex flex-col items-center justify-center hidden"
            >
                <button
                    onclick="closeWaitingQueueModal()"
                    id="close-avatar-menu"
                    class="cursor-pointer border-1 border-gray-800 w-6 h-6 rounded-full bg-white text-black text-lg flex items-center justify-center"
                >
                    X
                </button>
                <div class="flex flex-col items-center">
                    <div id="waiting-text" class="text-white text-2xl mb-4">
                        In attesa di altri giocatori...
                    </div>
                    <div id="waiting-gif" class="mb-4">
                        <img
                            src="/images/gifs/queue-spinner.gif"
                            alt="Waiting Gif"
                            class="w-32 h-32"
                        />
                    </div>
                    <button
                        id="abandon-queue-button"
                        onclick="abandonQueue()"
                        class="px-6 py-3 bg-red-500 text-white font-semibold text-lg rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300 cursor-pointer"
                    >
                        ABBANDONA
                    </button>
                </div>
            </div>

            <!-- preQueue overlay -->
            <div
                id="countdown-overlay"
                class="fixed inset-0 bg-black/80 flex items-center justify-center z-10 hidden"
            >
                <div
                    id="game-ready-container"
                    class="flex flex-col items-center hidden"
                >
                    <h2 class="text-white text-4xl font-bold">Si Inizia!</h2>
                </div>
                <div
                    id="countdown-seconds-container"
                    class="flex flex-col items-center"
                >
                    <div id="countdown" class="text-white text-2xl mb-2">
                        Partita trovata, Inizio in:
                    </div>
                    <h2
                        id="countdown-seconds"
                        class="text-red-500 text-9xl font-bold"
                    ></h2>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.0/lottie.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/swiper/swiper-bundle.min.js"></script>
        <script src="/js/main.js" defer></script>
        <script src="/js/menu.js" defer></script>
        <script src="/js/getUserStats.js" defer></script>
        <script src="/js/personalLibrary.js"></script>
    </body>
</html>
